# ⭐ 排列组合问题

排列组合我将其分为以下几类

* 一对一模型
* 多对一模型
* 特殊模型

## 一对一模型

一对一模型指得是一个位置上只能放一个元素，解决的是元素的排序问题。一对一模型中有以下几类常见问题

* 相邻与不相邻问题
* 定序、部分元素相同问题
* 排座位问题（包括环排）
* 错排问题



### 相邻与不相邻问题

#### 理论部分

【捆绑法】适用于相邻元素：先将相邻元素捆绑作为一个组，当作一个大元素参与排列

【插空法】适用于不相邻元素：先排好其他元素，再把不相邻元素插入空处中

{% hint style="info" %}
不相邻问题注意点

1. 先排其余，再插空
2. 不要忘记内部排序（但如果是相同元素或者定序就不需要排序了）
{% endhint %}

【两类不相邻问题】两类元素都不相邻

1. n男n女：2 \* n! \* n!，只有以下两种排列方式再乘内部排序
   1. 男女男女…
   2. 女男女男…
2. (n+1)男n女：(n+1)! \* n!，只要以下一种排序方式
   1. 男女男女….男

#### 实践部分

**【例】五个人排成一排，甲、乙不相邻且甲、丙也不相邻的不同排法有多少种？**



> 【正面法】\
> 甲乙不相邻且甲丙不相邻需要分两类讨论
>
> * 乙丙不相邻：说明甲乙丙均不相邻，则先排剩余两个元素，再插入不相邻元素甲乙丙，2! \* 3!
> * 乙丙相邻：将乙丙打包，先排剩余三个元素，再插入不相邻元素甲、乙丙，3! \* 2!\* 2!
>
> 答案为两者相加 36种
>
> 【反面法】
>
> 将-A且-B转换为 总数 - （A或B） = 总数 - （A + B + A∩B）
>
> * 总数 = 5!
> * A代表甲乙相邻：2! \* 4!
> * B代表乙丙相邻：2! \* 4!
> * A∩B代表甲乙相邻且乙丙相邻：<mark style="color:purple;">**只有两种情况（甲乙丙，丙乙甲）**</mark>
>
> 答案同样是36
>
> 建议使用反面法



### 定序与部分相同元素

#### 理论部分

定序元素指得是：部分元素顺序固定（例如七个人中，甲乙丙从高到矮排）

【消序法】7! / 3!

【组合法】C7\_3 \* 4! （七个空中选3个将甲乙丙放进去，选而不排）

部分相同元素指得是：部分元素相同（例如7个球中有3个相同颜色的黑球）

解法同上

建议多使用组合法，能解决的问题更全面。

{% hint style="info" %}
注意定序问题中可以迁移到数字问题上。

例如0，1，2，3，4，5组成没有重复数字的3位数，百位 > 十位 > 个位

直接C6\_3，选而不排，因为顺序已经定好了
{% endhint %}



**实践部分**

**【例1】书架上某层有6本书，新买了3本要放入该层，要保持原来6本书顺序不变，则不同的排法有多少种？**

> 组合法：9个空中选6个空放这6本书，保证了顺序不变，顺序3本书随意排，C9\_6 \* 3! = 504\
> 消序法：9个空中随意排，消序相同元素部分，9! / 6! = 504

**【例2】有2个a，3个b，4个c共9个字母排成一排，有多少种排法**

> 组合法：9个空中选2个排a，7个空中选3个排b，剩余4个空排c，C9\_2 \* C7\_3 = 1260
>
> 消序法：9个空中随意排，消序相同元素部分，9! / (2!\*3!\*4!) = 1260



### 环排问题

环排问题注意消序即可，例如4个人围绕做一圈，4! / 4 = 3!，推广开来，n个人环排有(n-1)!种排法

{% hint style="info" %}
因为环排是无头无尾的，因此四个人排的时候就像坐旋转木马一样，会出现四个重复的情况，因此需要消序。
{% endhint %}



## 多对一模型

多对一模型指得是出现了多个元素需要分配到一个对象上的问题

下面我列出四种多对一方法的模型，供参考。

| 类型     | 方幂法    | 分组         | 分组分配                                         | 隔板法                                         |
| ------ | ------ | ---------- | -------------------------------------------- | ------------------------------------------- |
| 元素情况   | 元素不同   | 元素不同       | <mark style="color:purple;">**元素不同**</mark>  | <mark style="color:purple;">**元素相同**</mark> |
| 对象情况   | 对象不同   | 对象相同       | 对象不同                                         | 对象不同                                        |
| 要求     | 无      | 多个元素在一个小组内 | 多个元素在一个小组内                                   | 无                                           |
| 需要注意的点 | 可以重复使用 | 等数量小组要消序   | <ul><li>先分组，后分配</li><li>特殊元素+分组四步走</li></ul> | 先满足要求，再用可空法                                 |



### 不同元素分组分配问题

#### 理论部分

分组：n个不同元素分成m组（采用选取）

分配：m组分给z个不同的对象（采用阶乘）



**【分组问题】（数量为1的组可以不分）**

分组中我们只需要考虑以下三点「分类讨论」「至少至多」「等数量小组」

分类讨论：

1. 指定数量：不需要分类，因为只有一种分组方式
2. 不指定数量：需要分类有几种分组方式

至少至多：

* 先每组分一个，再讨论去向
* 例如7人分4组，则是1 1 1 1，剩3人再分到四组中
  * 4 1 1 1
  * 3 2 1 1
  * 2 2 2 1

等数量小组：

需要消序，例如6人分成3组（2， 2，2） ，需要除 3!

**【分配问题】（接收者与组之间的关系是否固定）**

例如

【1，2，3】三组书，分给甲1本，乙2本，丙3本。接收者与组之间的关系固定了，因此不需要再分配

【1，2，3】三组书，分给甲乙丙三人。接收者与组之间的关系没有固定，因此需要再分配（3!）



**【特殊元素+分组分配】先分剩余元素，再分特殊元素**

1. 将最后的分组情况写出
2. 将特殊元素踢出去，将其余元素分组
3. 特殊元素分配进组
4. 分配



#### 实践部分



**【例题1】六本不同的书，分给甲、乙、丙三人，每人至少一本，有多少种分法？**

> 【解析】此题可分类为：不相同元素的分组分配问题，由于数量未定，因此分组时需要分类讨论，有以下三种分组方式。
>
> * 1，1，4：$$C_{6}^{4} = 15$$
> * 2，2，2：$$C_{6}^{2} * C_{4}^{2}  *C_{2}^{2} ÷ 3! = 15$$​
> * 3，2，1：$$C_{6}^{3} * C_{3}^{2} = 60$$​
>
> 分配关系未定，需要再分配给三个对象：（90+15+60）\* 3!= 540

**【例题2】某公司销售部拟派3名销售主管和6名销售人员前往3座城市进行市场调研，每座城市派销售主管1名，销售人员2名。那么，不同的人员派遣方案有：**

> 两类元素的分组分配，依次分组分配，最后相乘
>
> * 销售主管：分成1, 1, 1，分组就1种，分配3个城市，因此就是3!
> * 销售人员：分成2, 2, 2, 分组C6\_2 _\*_ C4\_2 / 3!，_再分配3个城市，因此就是C6\_2 \* C4\_2 = 60_
> * _两者相乘等于_540

**【例题3】某公司新近录用五名应聘人员，将分别安排到产品开发、管理、销售和售后服务这四个部门工作，每个部门至少一人。若其中有两人只能从事销售或售后服务两个部门的工作，其余三人均能从事四个部门的工作，则不同的选派方案共有：**

> 5个不同的元素分到4个部门，所以这是分组分配问题，但有特殊情况。\
> 所以先特殊后一般\
> 甲乙只能干销售或者售后，所以有两种分类
>
> * 甲乙在同一部门（都干销售或售后，2种）
>   * 剩余3人分组为1，1，,1，分配给三个不同部门，所以直接 2 \* 3! = 12种
> * 甲乙在不同部门（2种）
>   * 分组为1, 2，分配到两个部门，2 \* C3\_2 \* 2 = 12种
>   * 分组为1, 1, 1，此时分配情况存在特殊，有一人需分配到销售或售后，其余两人需分配到开发和管理，所以答案就是 2 \* C3\_1 \* 2 \* 2 = 24种
>
> 因此总计为48种。\
> \
> 此题特殊情况较多，需要细心的分组分配，才能在短时间做对。

### 相同元素隔板法

#### 理论部分

隔板法可以理解为相同元素的分组问题

1. 相同元素
2. 随便放 / 每组至少一个元素 / 每组至少二个元素….

{% hint style="info" %}
隔板法与分组分配的区别

1. 隔板法由于是相同元素，所以他进哪个组是没区别的，是不需要再分配的，组之间的区别只有数量

2.分组分配是不相同元素，因此必须分组后再分配
{% endhint %}

n个相同元素，分成m组，每组至少一个

**【至少一个】想象成n个相同的元素，用m-1块板子分隔他们，即满足了每组至少一个的要求：**$$C_{n-1}^{m-1}$$****

**【可以为空】先借m个元素，再用m-1块板子分隔n+m个元素，即满足了每组可以为空的要求：**$$C_{n + m-1}^{m-1}$$

{% hint style="info" %}
可空法也可以用代数的思想理解\
例如10个元素分为四组\
A + B + C + D = 10 (A, B, C, D均大于0)\
此时两边同时加4就变成了\
(A+1) + (B+1) + (C+1) + (D+1) = 14 (A, B, C, D均大于等于1)，变成了隔板法常规形式\
\
于是答案就是 C13\_3
{% endhint %}



建议只学可空法两步走，先满足条件，再使用可空法

好处是可以灵活的处理一些变种题型，任何题型都可以处理



#### 实践部分



**【例1】10个运动员名额，分给7个班，每班至少一个；**

* 先满足方法：每个班分一个人
* 可空法：剩余3人随便分到7个组，即C7+3-1\_7-1 = C9\_6

**【例2】20个球放进编号为1，2，3，4的四个盒子中，每个盒子中球的数量不少于编号的放法有多少种？**

* 先满足放法：4个盒子中为1，2，3，4
* 可空法：剩余10个球随便分到4个组，C10+4-1\_4-1 = C13\_3 = 286
